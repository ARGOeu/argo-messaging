"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8239],{3905:(e,t,s)=>{s.d(t,{Zo:()=>u,kt:()=>m});var n=s(7294);function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(r[s]=e[s]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),s=t;return e&&(s="function"==typeof e?e(t):a(a({},t),e)),s},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var s=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(s),m=r,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return s?n.createElement(h,a(a({ref:t},u),{},{components:s})):n.createElement(h,a({ref:t},u))}));function m(e,t){var s=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=s.length,a=new Array(i);a[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,a[1]=o;for(var p=2;p<i;p++)a[p]=s[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,s)}d.displayName="MDXCreateElement"},5047:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=s(7462),r=(s(7294),s(3905));const i={id:"api_subscriptions",title:"Subscriptions",sidebar_position:5},a="Subscriptions Api Calls",o={unversionedId:"api_advanced/api_subscriptions",id:"api_advanced/api_subscriptions",title:"Subscriptions",description:"[PUT] Manage Subscriptions - Create subscriptions",source:"@site/docs/api_advanced/api_subs.md",sourceDirName:"api_advanced",slug:"/api_advanced/api_subscriptions",permalink:"/argo-messaging/docs/api_advanced/api_subscriptions",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"api_subscriptions",title:"Subscriptions",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Topics",permalink:"/argo-messaging/docs/api_advanced/api_topics"},next:{title:"API Operational Metrics",permalink:"/argo-messaging/docs/api_advanced/api_metrics"}},l={},p=[{value:"PUT Manage Subscriptions - Create subscriptions",id:"put-manage-subscriptions---create-subscriptions",level:2},{value:"Request",id:"request",level:3},{value:"Where",id:"where",level:3},{value:"Example request",id:"example-request",level:3},{value:"PUT  BODY",id:"put--body",level:3},{value:"Responses",id:"responses",level:3},{value:"Push Enabled Subscriptions",id:"push-enabled-subscriptions",level:3},{value:"Request to create Push Enabled Subscription for http_endpoint",id:"request-to-create-push-enabled-subscription-for-http_endpoint",level:2},{value:"Response",id:"response",level:3},{value:"Request to create Push Enabled Subscription for mattermost",id:"request-to-create-push-enabled-subscription-for-mattermost",level:2},{value:"Response",id:"response-1",level:3},{value:"Authorization headers",id:"authorization-headers",level:3},{value:"Different Retry Policies",id:"different-retry-policies",level:3},{value:"Errors",id:"errors",level:3},{value:"POST Manage Subscriptions - Verify ownership of a push endpoint",id:"post-manage-subscriptions---verify-ownership-of-a-push-endpoint",level:2},{value:"Request",id:"request-1",level:3},{value:"Where",id:"where-1",level:3},{value:"Example request",id:"example-request-1",level:3},{value:"Push Enabled Subscriptions",id:"push-enabled-subscriptions-1",level:3},{value:"Errors",id:"errors-1",level:3},{value:"GET Manage Subscriptions - List All Subscriptions under a specific Topic",id:"get-manage-subscriptions---list-all-subscriptions-under-a-specific-topic",level:2},{value:"Request",id:"request-2",level:3},{value:"Where",id:"where-2",level:3},{value:"Example request",id:"example-request-2",level:3},{value:"Errors",id:"errors-2",level:3},{value:"GET Manage Subscriptions - List All Subscriptions",id:"get-manage-subscriptions---list-all-subscriptions",level:2},{value:"Paginated Request that returns all subscriptions under the specified project",id:"paginated-request-that-returns-all-subscriptions-under-the-specified-project",level:3},{value:"Request",id:"request-3",level:3},{value:"Where",id:"where-3",level:3},{value:"Example request",id:"example-request-3",level:3},{value:"Responses",id:"responses-1",level:3},{value:"Paginated Request that returns the next page of a specific size",id:"paginated-request-that-returns-the-next-page-of-a-specific-size",level:3},{value:"Request",id:"request-4",level:3},{value:"Where",id:"where-4",level:3},{value:"Example request",id:"example-request-4",level:3},{value:"Responses",id:"responses-2",level:3},{value:"Paginated Request that returns the first page of a specific size",id:"paginated-request-that-returns-the-first-page-of-a-specific-size",level:3},{value:"Request",id:"request-5",level:3},{value:"Where",id:"where-5",level:3},{value:"Example request",id:"example-request-5",level:3},{value:"Responses",id:"responses-3",level:3},{value:"Errors",id:"errors-3",level:3},{value:"GET Manage Subscriptions - Get a subscription&#39;s list of authorized users",id:"get-manage-subscriptions---get-a-subscriptions-list-of-authorized-users",level:2},{value:"Request",id:"request-6",level:3},{value:"Where",id:"where-6",level:3},{value:"Example request",id:"example-request-6",level:3},{value:"Responses",id:"responses-4",level:3},{value:"Errors",id:"errors-4",level:3},{value:"POST Modify ACL of a given subscription",id:"post-modify-acl-of-a-given-subscription",level:2},{value:"Request",id:"request-7",level:3},{value:"Where",id:"where-7",level:3},{value:"Post data",id:"post-data",level:3},{value:"Example request",id:"example-request-7",level:3},{value:"Responses",id:"responses-5",level:3},{value:"Errors",id:"errors-5",level:3},{value:"DELETE Manage Subscriptions - Delete Subscriptions",id:"delete-manage-subscriptions---delete-subscriptions",level:2},{value:"Request",id:"request-8",level:3},{value:"Where",id:"where-8",level:3},{value:"Example request",id:"example-request-8",level:3},{value:"Responses",id:"responses-6",level:3},{value:"Errors",id:"errors-6",level:3},{value:"POST Modify Ack Deadline",id:"post-modify-ack-deadline",level:2},{value:"Request",id:"request-9",level:3},{value:"Post body:",id:"post-body",level:3},{value:"Where",id:"where-9",level:3},{value:"Example request",id:"example-request-9",level:3},{value:"post body:",id:"post-body-1",level:3},{value:"Responses",id:"responses-7",level:3},{value:"Errors",id:"errors-7",level:3},{value:"POST Modify Push Configuration",id:"post-modify-push-configuration",level:2},{value:"Request",id:"request-10",level:3},{value:"Post body for http_endpoint",id:"post-body-for-http_endpoint",level:3},{value:"Post body for mattermost",id:"post-body-for-mattermost",level:3},{value:"Where",id:"where-10",level:3},{value:"Example request",id:"example-request-10",level:3},{value:"post body:",id:"post-body-2",level:3},{value:"Responses",id:"responses-8",level:3},{value:"Errors",id:"errors-8",level:3},{value:"POST Pull messages from a subscription (Consume)",id:"post-pull-messages-from-a-subscription-consume",level:2},{value:"Request",id:"request-11",level:3},{value:"Post body:",id:"post-body-3",level:3},{value:"Where",id:"where-11",level:3},{value:"Example request",id:"example-request-11",level:3},{value:"post body:",id:"post-body-4",level:3},{value:"Responses",id:"responses-9",level:3},{value:"Errors",id:"errors-9",level:3},{value:"POST Sending an ACK",id:"post-sending-an-ack",level:2},{value:"Request",id:"request-12",level:3},{value:"Post body:",id:"post-body-5",level:3},{value:"Where",id:"where-12",level:3},{value:"Example request",id:"example-request-12",level:3},{value:"post body:",id:"post-body-6",level:3},{value:"Responses",id:"responses-10",level:3},{value:"Errors",id:"errors-10",level:3},{value:"GET Get Offsets",id:"get-get-offsets",level:2},{value:"Request",id:"request-13",level:3},{value:"Post body:",id:"post-body-7",level:3},{value:"Where",id:"where-13",level:3},{value:"Example request",id:"example-request-13",level:3},{value:"post body:",id:"post-body-8",level:3},{value:"Responses",id:"responses-11",level:3},{value:"Errors",id:"errors-11",level:3},{value:"GET Get Offset by Timestamp",id:"get-get-offset-by-timestamp",level:2},{value:"Request",id:"request-14",level:3},{value:"Where",id:"where-14",level:3},{value:"Example request",id:"example-request-14",level:3},{value:"Responses",id:"responses-12",level:3},{value:"Response body:",id:"response-body",level:3},{value:"Errors",id:"errors-12",level:3},{value:"POST Modify Offsets",id:"post-modify-offsets",level:2},{value:"Request",id:"request-15",level:3},{value:"Post body:",id:"post-body-9",level:3},{value:"Where",id:"where-15",level:3},{value:"Example request",id:"example-request-15",level:3},{value:"post body:",id:"post-body-10",level:3},{value:"Responses",id:"responses-13",level:3},{value:"Errors",id:"errors-13",level:3},{value:"GET Subscription Metrics",id:"get-subscription-metrics",level:2},{value:"Request",id:"request-16",level:3},{value:"Where",id:"where-16",level:3},{value:"Example request",id:"example-request-16",level:3},{value:"Responses",id:"responses-14",level:3},{value:"Errors",id:"errors-14",level:3}],u={toc:p};function c(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"subscriptions-api-calls"},"Subscriptions Api Calls"),(0,r.kt)("h2",{id:"put-manage-subscriptions---create-subscriptions"},"[PUT]"," Manage Subscriptions - Create subscriptions"),(0,r.kt)("p",null,"This request creates a new subscription in a project with a PUT request"),(0,r.kt)("h3",{id:"request"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"PUT /v1/projects/{project_name}/subscriptions/{subscription_name}")),(0,r.kt)("h3",{id:"where"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project to create"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to create")),(0,r.kt)("h3",{id:"example-request"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X PUT -H "Content-Type: application/json"  -d \'PUTBODY\'\n "https://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine ?key=S3CR3T"`\n')),(0,r.kt)("h3",{id:"put--body"},"PUT  BODY"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "topic": "projects/BRAND_NEW/topics/monitoring",\n "ackDeadlineSeconds":10\n}\n')),(0,r.kt)("h3",{id:"responses"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "name": "projects/BRAND_NEW/subscriptions/alert_engine",\n "topic": "projects/BRAND_NEW/topics/monitoring",\n "ackDeadlineSeconds": 10  ,\n "createdOn": "2020-11-19T00:00:00Z"\n}\n')),(0,r.kt)("h3",{id:"push-enabled-subscriptions"},"Push Enabled Subscriptions"),(0,r.kt)("p",null,"Whenever a subscription is created with a valid push configuration, the service will also generate a unique hash that\nshould be later used to validate the ownership of the registered push endpoint, and will mark the subscription as\nunverified."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," field specifies what kind of push subscription the service will handle.\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"http_endpoint")," type is about subscriptions that will forward their messages\nto remote http endpoints. The ",(0,r.kt)("inlineCode",{parentName:"p"},"mattermost")," type is about subscriptions that will\nforward their messages to mattermost channels through a mattermost webhook."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"maxMessages")," field declares the number of messages that should be sent per\npush action. The default value is ",(0,r.kt)("inlineCode",{parentName:"p"},"1"),". If ",(0,r.kt)("inlineCode",{parentName:"p"},"maxMessages")," holds a value of ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," your\npush endpoint should expect a request body with the following schema:"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"base64Decode")," field indicates that the push mechanism should\ndecode each message before sending it to the remote destination."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n     "message": {\n       "attributes": {\n         "key": "value"\n       },\n       "data": "SGVsbG8gQ2xvdWQgUHViL1N1YiEgSGVyZSBpcyBteSBtZXNzYWdlIQ==",\n       "messageId": "136969346945"\n     },\n     "subscription": "projects/myproject/subscriptions/mysubscription"\n   }\n')),(0,r.kt)("p",null,"If the ",(0,r.kt)("inlineCode",{parentName:"p"},"maxMessages")," field holds a value of greater than ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," your push endpoint\nshould expect a request body with the following schema:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{  \n   "messages":[  \n      {  \n         "message":{  \n            "attributes":{  \n               "key":"value"\n            },\n            "data":"SGVsbG8gQ2xvdWQgUHViL1N1YiEgSGVyZSBpcyBteSBtZXNzYWdlIQ==",\n            "messageId":"136969346945"\n         },\n         "subscription":"projects/myproject/subscriptions/mysubscription"\n      },\n      {  \n         "message":{  \n            "attributes":{  \n               "key":"value"\n            },\n            "data":"SGVsbG8gQ2xvdWQgUHViL1N1YiEgSGVyZSBpcyBteSBtZXNzYWdlIQ==",\n            "messageId":"136969346945"\n         },\n         "subscription":"projects/myproject/subscriptions/mysubscription"\n      }\n   ]\n}\n')),(0,r.kt)("h2",{id:"request-to-create-push-enabled-subscription-for-http_endpoint"},"Request to create Push Enabled Subscription for http_endpoint"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "topic": "projects/BRAND_NEW/topics/monitoring",\n "ackDeadlineSeconds":10,\n  "pushConfig": {\n    "type": "http_endpoint",\n    "pushEndpoint": "https://127.0.0.1:5000/receive_here",\n    "maxMessages": 3,\n    "retryPolicy": {\n      "type": "linear", \n      "period": 1000                \n    }\n   }\n}\n')),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "name": "projects/BRAND_NEW/subscriptions/alert_engine",\n "topic": "projects/BRAND_NEW/topics/monitoring",\n "ackDeadlineSeconds": 10,\n  "pushConfig": {\n    "pushEndpoint": "https://127.0.0.1:5000/receive_here",\n    "maxMessages": 3,\n    "authorizationHeader": {\n      "type": "autogen",\n      "value": "4551h9j7f7dde380a5f8bc4fdb4fe980c565b67b"\n    } ,\n    "retryPolicy": {\n      "type": "linear", \n      "period": 1000                \n    },\n    "verificationHash": "9d5189f7f758e380a5f8bc4fdb4fe980c565b67b",\n    "verified": false,\n    "mattermostUrl": "",\n    "mattermostUsername": "",\n    "mattermostChannel": ""\n    },\n  "createdOn": "2020-11-19T00:00:00Z"\n}\n')),(0,r.kt)("h2",{id:"request-to-create-push-enabled-subscription-for-mattermost"},"Request to create Push Enabled Subscription for mattermost"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "topic": "projects/BRAND_NEW/topics/monitoring",\n "ackDeadlineSeconds":10,\n  "pushConfig": {\n    "type": "mattermost",\n    "mattermostUrl": "webhook.com",\n    "mattermostUsername": "mattermost",\n    "mattermostChannel": "channel",\n    "retryPolicy": {\n      "type": "linear", \n      "period": 1000                \n    }\n   }\n}\n')),(0,r.kt)("h3",{id:"response-1"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "name": "projects/BRAND_NEW/subscriptions/alert_engine",\n "topic": "projects/BRAND_NEW/topics/monitoring",\n "ackDeadlineSeconds": 10,\n  "pushConfig": {\n    "pushEndpoint": "",\n    "maxMessages": 1,\n    "retryPolicy": {\n      "type": "linear", \n      "period": 1000                \n    },\n    "verificationHash": "",\n    "verified": true,\n    "mattermostUrl": "webhook.com",\n    "mattermostUsername": "mattermost",\n    "mattermostChannel": "channel"\n    },\n  "createdOn": "2020-11-19T00:00:00Z"\n}\n')),(0,r.kt)("h3",{id:"authorization-headers"},"Authorization headers"),(0,r.kt)("p",null,"Specify an ",(0,r.kt)("inlineCode",{parentName:"p"},"authorization header")," value and how it is going to be generated,\nto be included in the outgoing push request with each message, to the remote\npush endpoint."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"autogen(default)"),": The authorization header value will be automatically\ngenerated by the service itself."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"disabled"),": No authorization header will be provided with the outgoing\npush requests.")),(0,r.kt)("h3",{id:"different-retry-policies"},"Different Retry Policies"),(0,r.kt)("p",null,"Creating a push enabled subscription with a ",(0,r.kt)("inlineCode",{parentName:"p"},"linear")," retry policy and a ",(0,r.kt)("inlineCode",{parentName:"p"},"period")," of 3000 means that you will be receiving\nmessage(s) every ",(0,r.kt)("inlineCode",{parentName:"p"},"3000ms"),"."),(0,r.kt)("p",null,"If you decide to choose a retry policy of ",(0,r.kt)("inlineCode",{parentName:"p"},"slowstart"),", you will be receiving messages with dynamic internals.\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"slowstart")," retry policy starts by pushing the first message(s) and then deciding the time that should elapse\nbefore the next push action."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"IF")," the message(s) are delivered successfully the elapsed time until the next push request will be halved, until it reaches\nthe lower limit of ",(0,r.kt)("inlineCode",{parentName:"p"},"300ms"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"IF")," the message(s) are not delivered successfully the elapsed time until the next push request will be doubled, until\nit reached the upper limit of ",(0,r.kt)("inlineCode",{parentName:"p"},"1day"),"."))),(0,r.kt)("p",null,"So for example, the first push action will have by default a ",(0,r.kt)("inlineCode",{parentName:"p"},"1 second")," interval. If it successful the next push re request will\nhappen in ",(0,r.kt)("inlineCode",{parentName:"p"},"0.5 seconds"),". If it is unsuccessful the next push request will happen in ",(0,r.kt)("inlineCode",{parentName:"p"},"2 seconds"),"."),(0,r.kt)("h3",{id:"errors"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-manage-subscriptions---verify-ownership-of-a-push-endpoint"},"[POST]"," Manage Subscriptions - Verify ownership of a push endpoint"),(0,r.kt)("p",null,"This request triggers the process of verifying the ownership of a registered push endpoint "),(0,r.kt)("h3",{id:"request-1"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"PUT /v1/projects/{project_name}/subscriptions/{subscription_name}:verifyPushEndpoint")),(0,r.kt)("h3",{id:"where-1"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name")),(0,r.kt)("h3",{id:"example-request-1"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST "https://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:verifyPushEndpoint?key=S3CR3T"`\n')),(0,r.kt)("h3",{id:"push-enabled-subscriptions-1"},"Push Enabled Subscriptions"),(0,r.kt)("p",null,"Whenever a subscription is created with a valid push configuration, the service will also generate a unique hash that\nshould be later used to validate the ownership of the registered push endpoint, and will mark the subscription as\nunverified."),(0,r.kt)("p",null,"The owner of the push endpoint needs to execute the following steps in order to verify the ownership of the\nregistered endpoint."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Open an api call with a path of ",(0,r.kt)("inlineCode",{parentName:"p"},"/ams_verificationHash"),". The service will try to access this path using the ",(0,r.kt)("inlineCode",{parentName:"p"},"host:port"),"\nof the push endpoint. For example, if the push endpoint is ",(0,r.kt)("inlineCode",{parentName:"p"},"https://example.com:8443/receive_here"),", the  push endpoint should also\nsupport the api route of ",(0,r.kt)("inlineCode",{parentName:"p"},"https://example.com:8443/ams_verificationHash"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The api route of ",(0,r.kt)("inlineCode",{parentName:"p"},"https://example.com:8443/ams_verificationHash")," should support the http ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")," method.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"A ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")," request to ",(0,r.kt)("inlineCode",{parentName:"p"},"https://example.com:8443/ams_verificationHash")," should return a response body\nwith only the ",(0,r.kt)("inlineCode",{parentName:"p"},"verificationHash"),"\nthat is found inside the subscriptions push configuration,\na ",(0,r.kt)("inlineCode",{parentName:"p"},"status code")," of ",(0,r.kt)("inlineCode",{parentName:"p"},"200")," and the header ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-type: plain/text"),"."))),(0,r.kt)("h3",{id:"errors-1"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-manage-subscriptions---list-all-subscriptions-under-a-specific-topic"},"[GET]"," Manage Subscriptions - List All Subscriptions under a specific Topic"),(0,r.kt)("p",null,"This request lists all available subscriptions under a specific topic in the service."),(0,r.kt)("h3",{id:"request-2"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /v1/projects/{project_name}/topics/{topic_name}/subscriptions")),(0,r.kt)("h3",{id:"where-2"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project the topic belongs to"),(0,r.kt)("li",{parentName:"ul"},"Topic_name: Name of the topic")),(0,r.kt)("h3",{id:"example-request-2"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X GET -H "Content-Type: application/json"\n  "https://{URL}/v1/projects/p1/topics/t1/subscriptions?key=S3CR3T"\n')),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "subscriptions": [\n "/projects/p1/subscriptions/sub1",\n "/projects/p1/subscriptions/sub2"\n ]\n}\n')),(0,r.kt)("h3",{id:"errors-2"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-manage-subscriptions---list-all-subscriptions"},"[GET]"," Manage Subscriptions - List All Subscriptions"),(0,r.kt)("p",null,"This request lists all available subscriptions under a specific project in the service using pagination"),(0,r.kt)("p",null,"If the ",(0,r.kt)("inlineCode",{parentName:"p"},"USER")," making the request has only ",(0,r.kt)("inlineCode",{parentName:"p"},"consumer")," role for the respective project, it will load\nonly the subscriptions that he has access to(being present in a subscriptions's acl)."),(0,r.kt)("p",null,"It is important to note that if there are no results to return the service will return the following:"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "subscriptions": [],\n  "nextPageToken": "",\n  "totalSize": 0\n }\n')),(0,r.kt)("p",null,"Also the default value for ",(0,r.kt)("inlineCode",{parentName:"p"},"pageSize = 0")," and ",(0,r.kt)("inlineCode",{parentName:"p"},'pageToken = "'),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Pagesize = 0")," returns all the results."),(0,r.kt)("h3",{id:"paginated-request-that-returns-all-subscriptions-under-the-specified-project"},"Paginated Request that returns all subscriptions under the specified project"),(0,r.kt)("p",null,"This request lists all subscriptions  in a project with a GET  request"),(0,r.kt)("h3",{id:"request-3"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /v1/projects/{project_name}/subscriptions")),(0,r.kt)("h3",{id:"where-3"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project to list the subscriptions")),(0,r.kt)("h3",{id:"example-request-3"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X GET -H "Content-Type: application/json"\n  "https://{URL}/v1/projects/BRAND_NEW/subscriptions?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"responses-1"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},' {\n  "subscriptions":[\n  {\n    "name": "projects/BRAND_NEW/subscriptions/alert_engine",\n    "topic": "projects/BRAND_NEW/topics/monitoring",\n    "pushConfig": {},\n    "ackDeadlineSeconds": 10,\n    "createdOn": "2020-11-19T00:00:00Z"\n  },\n {\n   "name": "projects/BRAND_NEW/subscriptions/alert_engine2",\n   "topic": "projects/BRAND_NEW/topics/monitoring",\n   "pushConfig": {},\n   "ackDeadlineSeconds": 10,\n   "createdOn": "2020-11-19T00:00:00Z"\n }],\n "nextPageToken": "",\n "totalSize": 2\n}\n')),(0,r.kt)("h3",{id:"paginated-request-that-returns-the-next-page-of-a-specific-size"},"Paginated Request that returns the next page of a specific size"),(0,r.kt)("p",null,"This request lists subscriptions  in a project with a GET  request"),(0,r.kt)("h3",{id:"request-4"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /v1/projects/{project_name}/subscriptions")),(0,r.kt)("h3",{id:"where-4"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project to list the subscriptions")),(0,r.kt)("h3",{id:"example-request-4"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X PUT -H "Content-Type: application/json"\n  "https://{URL}/v1/projects/BRAND_NEW/subscriptions?key=S3CR3T&pageSize=1&pageToken=some_token"\n')),(0,r.kt)("h3",{id:"responses-2"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},' {\n  "subscriptions":[\n   {\n    "name": "projects/BRAND_NEW/subscriptions/alert_engine",\n    "topic": "projects/BRAND_NEW/topics/monitoring",\n    "pushConfig": {},\n    "ackDeadlineSeconds": 10,\n    "createdOn": "2020-11-19T00:00:00Z"\n  }\n ],\n "nextPageToken": "",\n "totalSize": 2\n}\n')),(0,r.kt)("h3",{id:"paginated-request-that-returns-the-first-page-of-a-specific-size"},"Paginated Request that returns the first page of a specific size"),(0,r.kt)("p",null,"This request lists subscriptions  in a project with a GET  request"),(0,r.kt)("h3",{id:"request-5"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /v1/projects/{project_name}/subscriptions")),(0,r.kt)("h3",{id:"where-5"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project to list the subscriptions")),(0,r.kt)("h3",{id:"example-request-5"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X PUT -H "Content-Type: application/json"\n  "https://{URL}/v1/projects/BRAND_NEW/subscriptions?key=S3CR3T&pageSize=1"\n')),(0,r.kt)("h3",{id:"responses-3"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},' {\n "subscriptions":[\n  {\n    "name": "projects/BRAND_NEW/subscriptions/alert_engine2",\n    "topic": "projects/BRAND_NEW/topics/monitoring",\n    "pushConfig": {},\n    "ackDeadlineSeconds": 10,\n    "createdOn": "2020-11-19T00:00:00Z"\n  }\n ],\n "nextPageToken": "some_token",\n "totalSize": 2\n}\n')),(0,r.kt)("h3",{id:"errors-3"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-manage-subscriptions---get-a-subscriptions-list-of-authorized-users"},"[GET]"," Manage Subscriptions - Get a subscription's list of authorized users"),(0,r.kt)("p",null,"This request returns a list of authorized users to consume from the subscription"),(0,r.kt)("h3",{id:"request-6"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET /v1/projects/{project_name}/subscriptions/{sub_name}:acl\n")),(0,r.kt)("h3",{id:"where-6"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project to get"),(0,r.kt)("li",{parentName:"ul"},"Sub_name: The subscription name")),(0,r.kt)("h3",{id:"example-request-6"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -H "Content-Type: application/json"  \n "https://{URL}/v1/projects/BRAND_NEW/subscriptions/subscription:acl?key=S3CR3T"`\n')),(0,r.kt)("h3",{id:"responses-4"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "authorized_users": ["userC","userD"]\n}\n')),(0,r.kt)("h3",{id:"errors-4"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-modify-acl-of-a-given-subscription"},"[POST]"," Modify ACL of a given subscription"),(0,r.kt)("p",null,"The following request Modifies the authorized users list of a given subscription"),(0,r.kt)("h3",{id:"request-7"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'POST "/v1/projects/{project_name}/subscriptions/{sub_name}:modifyAcl"\n')),(0,r.kt)("h3",{id:"where-7"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"sub_name: name of the subscription")),(0,r.kt)("h3",{id:"post-data"},"Post data"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n"authorized_users": [\n "UserX","UserY"\n]\n}\n')),(0,r.kt)("h3",{id:"example-request-7"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X POST -H "Content-Type: application/json"  \n-d { POSTDATA } "https://{URL}/v1/projects/BRAND_NEW/subscriptions/subscription:modifyAcl?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"responses-5"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("h3",{id:"errors-5"},"Errors"),(0,r.kt)("p",null,"If the to-be updated ACL contains users that are non-existent in the project, the API returns the following error:\n",(0,r.kt)("inlineCode",{parentName:"p"},"404 NOT_FOUND")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "error": {\n      "code": 404,\n      "message": "User(s): UserFoo1,UserFoo2 do not exist",\n      "status": "NOT_FOUND"\n   }\n}\n')),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"delete-manage-subscriptions---delete-subscriptions"},"[DELETE]"," Manage Subscriptions - Delete Subscriptions"),(0,r.kt)("p",null,"This request deletes a subscription in a project with a DELETE request"),(0,r.kt)("h3",{id:"request-8"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"DELETE /v1/projects/{project_name}/subscriptions/{subscription_name}")),(0,r.kt)("h3",{id:"where-8"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to delete")),(0,r.kt)("h3",{id:"example-request-8"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X DELETE -H "Content-Type: application/json"  \nhttp://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine?key=S3CR3T\n')),(0,r.kt)("h3",{id:"responses-6"},"Responses"),(0,r.kt)("p",null,"Success Response\nCode: ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK"),", Empty response if successful."),(0,r.kt)("h3",{id:"errors-6"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-modify-ack-deadline"},"[POST]"," Modify Ack Deadline"),(0,r.kt)("p",null,"This request modifies the acknowledgement deadline for the subscription. The ack deadline value is measured in seconds. The minimum ack deadline value allowed is 0sec and the maximum 600sec."),(0,r.kt)("h3",{id:"request-9"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST /v1/projects/{project_name}/subscriptions/{subscription_name}:modifyAckDeadline")),(0,r.kt)("h3",{id:"post-body"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "ackDeadlineSeconds": 20\n}\n')),(0,r.kt)("h3",{id:"where-9"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to consume"),(0,r.kt)("li",{parentName:"ul"},"ackDeadlineSeconds: integer representing seconds for the acknowledgement deadline (min=0sec, max=600sec).")),(0,r.kt)("h3",{id:"example-request-9"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Content-Type: application/json"  \n-d $POSTDATA "http://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:modifyAckDeadline?key=S3CR3T\n')),(0,r.kt)("h3",{id:"post-body-1"},"post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "ackDeadlineSeconds": 30\n}\n')),(0,r.kt)("h3",{id:"responses-7"},"Responses"),(0,r.kt)("p",null,"Success Response\nCode: ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK"),", Empty response if successful. The deadline will change to 30seconds"),(0,r.kt)("h3",{id:"errors-7"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-modify-push-configuration"},"[POST]"," Modify Push Configuration"),(0,r.kt)("p",null,"This request modifies the push configuration of a subscription"),(0,r.kt)("h3",{id:"request-10"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST /v1/projects/{project_name}/subscriptions/{subscription_name}:modifyPushConfig")),(0,r.kt)("h3",{id:"post-body-for-http_endpoint"},"Post body for http_endpoint"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{  \n   "pushConfig":{  \n      "type": "http_endpoint",\n      "pushEndpoint":"example.com",\n      "maxMessages": 5,\n      "authorizationHeader": {\n         "type": "autogen"\n      },\n      "retryPolicy":{  \n         "type":"linear",\n         "period":300\n      },\n      "base64Decode": false\n   }\n}\n')),(0,r.kt)("h3",{id:"post-body-for-mattermost"},"Post body for mattermost"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{  \n   "pushConfig":{  \n      "type": "mattermost",\n      "retryPolicy":{  \n         "type":"linear",\n         "period":300\n      },\n      "mattermostUrl": "webhook.com",\n      "mattermostUsername": "willy",\n      "mattermostChannel": "ops",\n      "base64Decode": true\n   }\n}\n')),(0,r.kt)("h3",{id:"where-10"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Project_name: Name of the project")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"subscription_name: The subscription name to consume")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"pushConfig: configuration including pushEndpoint for the remote endpoint to receive the messages. Also includes retryPolicy (type of retryPolicy and period parameters)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"autogen(default when modyfing a sub from pull to push)"),": The authorization header value will be automatically\ngenerated by the service itself.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"disabled"),": No authorization header will be provided with the outgoing\npush requests."))),(0,r.kt)("b",null,"NOTE")," that if you updated a push configuration with ",(0,r.kt)("b",null,"autogen"),"the service will generate a new value every time the update request happens. For example, if you want to update your authorization header value, you can use the update request with the ",(0,r.kt)("b",null,"autogen")," type.",(0,r.kt)("h3",{id:"example-request-10"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Content-Type: application/json"  \n-d $POSTDATA http://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:modifyPushConfig?key=S3CR3T\n')),(0,r.kt)("h3",{id:"post-body-2"},"post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{  \n   "pushConfig":{  \n      "type": "http_endpoint",\n      "pushEndpoint":"host:example.com:8080/path/to/hook",\n      "maxMessages": 3,\n      "retryPolicy":{  \n         "type":"linear",\n         "period":300\n      }\n   }\n}\n')),(0,r.kt)("h3",{id:"responses-8"},"Responses"),(0,r.kt)("p",null,"Success Response\nCode: ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK"),", Empty response if successful."),(0,r.kt)("p",null,"Whenever a subscription is created with a valid push configuration, the service will also generate a unique hash that\nshould be later used to validate the ownership of the registered push endpoint, and will mark the subscription as\nunverified."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE")," Changing the push endpoint of a push enabled subscription, or removing the push configuration and then re-applying\nwill mark the subscription as unverified and a new verification process should take place."),(0,r.kt)("h3",{id:"errors-8"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-pull-messages-from-a-subscription-consume"},"[POST]"," Pull messages from a subscription (Consume)"),(0,r.kt)("p",null,"This request consumes messages from a subscription in a project with a POST request."),(0,r.kt)("p",null,"It's important to note that the subscription's topic must exist in order for the user to pull messages."),(0,r.kt)("h3",{id:"request-11"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST /v1/projects/{project_name}/subscriptions/{subscription_name}:pull")),(0,r.kt)("h3",{id:"post-body-3"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "maxMessages": "1"\n}\n')),(0,r.kt)("h3",{id:"where-11"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Project_name: Name of the project")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"subscription_name: The subscription name to consume")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"maxMessages: the max number of messages to consume")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"returnImmediately: (true or false) to prevent the subscriber from waiting if the queue is currently empty. If not specified the default value is true."),(0,r.kt)("p",{parentName:"li"},"You can specify the max number of messages returned by one call by setting maxMessages field. By default, the server will keep the connection open until at least one message is received; you can optionally set the returnImmediately field to true to prevent the subscriber from waiting if the queue is currently empty."))),(0,r.kt)("h3",{id:"example-request-11"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Content-Type: application/json"\n  -d $POSTDATA https://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:pull?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body-4"},"post body:"),(0,r.kt)("p",null,'{\n"maxMessages": "1"\n}'),(0,r.kt)("h3",{id:"responses-9"},"Responses"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "receivedMessages": [\n    {\n      "ackId": "dQNNHlAbEGEIBE...",\n      "message": {\n        "attributes": [\n          {\n            "key": "whatever",\n            "value": "foo"\n          }\n        ],\n        "data": "U28geW91IHdlbnQgYWhlYWQgYW5kIGRlY29kZWQgdGhpcywgeW91IGNvdWxkbid0IHJlc2lzdCBlaCA/",\n        "messageId": "100309303"\n      }\n    }\n  ]\n}\n')),(0,r.kt)("h3",{id:"errors-9"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-sending-an-ack"},"[POST]"," Sending an ACK"),(0,r.kt)("p",null,"Messages retrieved from a pull subscription can be acknowledged by sending message with an array of ackIDs."),(0,r.kt)("h3",{id:"request-12"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST /v1/projects/{project_name}/subscriptions/{subscription_name}:acknowledge")),(0,r.kt)("h3",{id:"post-body-5"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "ackIds": [\n  "dQNNHlAbEGEIBE..."\n ]\n\n}\n')),(0,r.kt)("h3",{id:"where-12"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to consume"),(0,r.kt)("li",{parentName:"ul"},"ackIds: the ids of the messages")),(0,r.kt)("h3",{id:"example-request-12"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -X POST -H "Content-Type: application/json"  \n-d $POSTDATA http://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:acknowledge?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body-6"},"post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n "ackIds": [\n  "dQNNHlAbEGEIBE..."\n ]\n}\n')),(0,r.kt)("h3",{id:"responses-10"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("h3",{id:"errors-10"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-get-offsets"},"[GET]"," Get Offsets"),(0,r.kt)("p",null,"This request returns the min, max and current offset of a subscription"),(0,r.kt)("h3",{id:"request-13"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /v1/projects/{project_name}/subscriptions/{subscription_name}:offsets")),(0,r.kt)("h3",{id:"post-body-7"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "max": 14,\n  "min": 0,\n  "current": 4\n}\n')),(0,r.kt)("h3",{id:"where-13"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to consume")),(0,r.kt)("h3",{id:"example-request-13"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X GET -H "Content-Type: application/json"  \n-d $POSTDATA "http://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:offsets?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body-8"},"post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "max": 14,\n  "min": 0,\n  "current": 4\n}\n')),(0,r.kt)("h3",{id:"responses-11"},"Responses"),(0,r.kt)("p",null,"Success Response\nCode: ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK"),", Empty response if successful."),(0,r.kt)("h3",{id:"errors-11"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-get-offset-by-timestamp"},"[GET]"," Get Offset by Timestamp"),(0,r.kt)("p",null,"This request returns the offset of the first message with a timestamp equal or greater than the time given."),(0,r.kt)("h3",{id:"request-14"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET /v1/projects/{project_name}/subscriptions/{subscription_name}:timeToOffset?time={{timestamp}}")),(0,r.kt)("h3",{id:"where-14"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to consume"),(0,r.kt)("li",{parentName:"ul"},"timestamp: timestamp in ",(0,r.kt)("inlineCode",{parentName:"li"},"Zulu")," format - ",(0,r.kt)("inlineCode",{parentName:"li"},"(2006-11-02T13:39:11.000Z)"))),(0,r.kt)("h3",{id:"example-request-14"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X GET -H "Content-Type: application/json"  \n"http://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:timeToOffset?key=S3CR3T&time=2019-09-02T13:39:11.100Z"\n')),(0,r.kt)("h3",{id:"responses-12"},"Responses"),(0,r.kt)("p",null,"Success Response\nCode: ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("h3",{id:"response-body"},"Response body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "offset": 640\n}\n')),(0,r.kt)("h3",{id:"errors-12"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-modify-offsets"},"[POST]"," Modify Offsets"),(0,r.kt)("p",null,"This request modifies the current offset of a subscription"),(0,r.kt)("h3",{id:"request-15"},"Request"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST /v1/projects/{project_name}/subscriptions/{subscription_name}:modifyOFfset")),(0,r.kt)("h3",{id:"post-body-9"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n "offset":3\n}\n')),(0,r.kt)("h3",{id:"where-15"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: Name of the project"),(0,r.kt)("li",{parentName:"ul"},"subscription_name: The subscription name to consume"),(0,r.kt)("li",{parentName:"ul"},"offset_config: an offset number in int64")),(0,r.kt)("h3",{id:"example-request-15"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST -H "Content-Type: application/json"  \n-d $POSTDATA "http://{URL}/v1/projects/BRAND_NEW/subscriptions/alert_engine:modifyOffset?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body-10"},"post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "offset":14\n}\n')),(0,r.kt)("h3",{id:"responses-13"},"Responses"),(0,r.kt)("p",null,"Success Response\nCode: ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK"),", Empty response if successful."),(0,r.kt)("h3",{id:"errors-13"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-subscription-metrics"},"[GET]"," Subscription Metrics"),(0,r.kt)("p",null,"The following request returns related metrics for the specific subscription: for e.g. the number of consumed messages"),(0,r.kt)("h3",{id:"request-16"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'GET "/v1/projects/{project_name}/subscriptions/{sub_name}:metrics"\n')),(0,r.kt)("h3",{id:"where-16"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project_name: name of the project"),(0,r.kt)("li",{parentName:"ul"},"sub_name: name of the subscription")),(0,r.kt)("h3",{id:"example-request-16"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl  -H "Content-Type: application/json"\n"https://{URL}/v1/projects/BRAND_NEW/subscriptions/monitoring:metrics?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"responses-14"},"Responses"),(0,r.kt)("p",null,"If successful it returns the number of messages consumed in the specific subscription\nSuccess Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "metrics": [\n      {\n         "metric": "subscription.number_of_messages",\n         "metric_type": "counter",\n         "value_type": "int64",\n         "resource_type": "subscription",\n         "resource_name": "sub1",\n         "timeseries": [\n            {\n               "timestamp": "2017-06-30T14:20:38Z",\n               "value": 0\n            }\n         ],\n         "description": "Counter that displays the number number of messages published to the specific topic"\n      },\n      {\n         "metric": "topic.number_of_bytes",\n         "metric_type": "counter",\n         "value_type": "int64",\n         "resource_type": "topic",\n         "resource_name": "sub1",\n         "timeseries": [\n            {\n               "timestamp": "2017-06-30T14:20:38Z",\n               "value": 0\n            }\n         ],\n         "description": "Counter that displays the total size of data (in bytes) published to the specific topic"\n      },\n      {\n         "metric": "subscription.consumption_rate",\n         "metric_type": "rate",\n         "value_type": "float64",\n         "resource_type": "subscription",\n         "resource_name": "sub1",\n         "timeseries": [\n            {\n               "timestamp": "2019-05-06T00:00:00Z",\n               "value": 10\n            }\n         ],\n         "description": "A rate that displays how many messages were consumed per second between the last two consume events"\n      }\n   ]\n}\n')),(0,r.kt)("h3",{id:"errors-14"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_basic/api_errors"},"Errors")," to see all possible Errors"))}c.isMDXComponent=!0}}]);