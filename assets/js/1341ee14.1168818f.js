"use strict";(self.webpackChunkargo_messaging=self.webpackChunkargo_messaging||[]).push([[316],{3905:function(e,n,a){a.d(n,{Zo:function(){return i},kt:function(){return h}});var t=a(7294);function s(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){s(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,t,s=function(e,n){if(null==e)return{};var a,t,s={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(s[a]=e[a]);return s}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var p=t.createContext({}),c=function(e){var n=t.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},i=function(e){var n=c(e.components);return t.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,s=e.mdxType,r=e.originalType,p=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),u=c(a),h=s,d=u["".concat(p,".").concat(h)]||u[h]||m[h]||r;return a?t.createElement(d,l(l({ref:n},i),{},{components:a})):t.createElement(d,l({ref:n},i))}));function h(e,n){var a=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var r=a.length,l=new Array(r);l[0]=u;var o={};for(var p in n)hasOwnProperty.call(n,p)&&(o[p]=n[p]);o.originalType=e,o.mdxType="string"==typeof e?e:s,l[1]=o;for(var c=2;c<r;c++)l[c]=a[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6703:function(e,n,a){a.r(n),a.d(n,{assets:function(){return i},contentTitle:function(){return p},default:function(){return h},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return m}});var t=a(7462),s=a(3366),r=(a(7294),a(3905)),l=["components"],o={id:"api_schemas",title:"Schemas"},p=void 0,c={unversionedId:"api_schemas",id:"api_schemas",title:"Schemas",description:"Schemas is a resource that works with topics by validating the published messages.",source:"@site/docs/api_schemas.md",sourceDirName:".",slug:"/api_schemas",permalink:"/argo-messaging/docs/api_schemas",draft:!1,tags:[],version:"current",frontMatter:{id:"api_schemas",title:"Schemas"},sidebar:"someSidebar",previous:{title:"API Operational Metrics",permalink:"/argo-messaging/docs/api_metrics"},next:{title:"Get API Version information",permalink:"/argo-messaging/docs/api_version"}},i={},m=[{value:"GET Manage Schemas - Retrieve a Schema",id:"get-manage-schemas---retrieve-a-schema",level:2},{value:"Request",id:"request",level:3},{value:"Where",id:"where",level:3},{value:"Example request",id:"example-request",level:3},{value:"Responses",id:"responses",level:3},{value:"Errors",id:"errors",level:3},{value:"GET Manage Schemas - Retrieve All Schemas",id:"get-manage-schemas---retrieve-all-schemas",level:2},{value:"Request",id:"request-1",level:3},{value:"Where",id:"where-1",level:3},{value:"Example request",id:"example-request-1",level:3},{value:"Responses",id:"responses-1",level:3},{value:"Errors",id:"errors-1",level:3},{value:"POST Manage Schemas - Create new Schema",id:"post-manage-schemas---create-new-schema",level:2},{value:"Supported Schema Types",id:"supported-schema-types",level:3},{value:"Request",id:"request-2",level:3},{value:"Where",id:"where-2",level:3},{value:"Example request",id:"example-request-2",level:3},{value:"Post body:",id:"post-body",level:3},{value:"Responses",id:"responses-2",level:3},{value:"Errors",id:"errors-2",level:3},{value:"PUT Manage Schemas - Update Schema",id:"put-manage-schemas---update-schema",level:2},{value:"Request",id:"request-3",level:3},{value:"Where",id:"where-3",level:3},{value:"Example request",id:"example-request-3",level:3},{value:"Post body:",id:"post-body-1",level:3},{value:"Responses",id:"responses-3",level:3},{value:"Errors",id:"errors-3",level:3},{value:"DELETE Manage Schemas - Delete Schema",id:"delete-manage-schemas---delete-schema",level:2},{value:"Request",id:"request-4",level:3},{value:"Where",id:"where-4",level:3},{value:"Example request",id:"example-request-4",level:3},{value:"Responses",id:"responses-4",level:3},{value:"Errors",id:"errors-4",level:3},{value:"POST Manage Schemas - Validate Message",id:"post-manage-schemas---validate-message",level:2},{value:"Request",id:"request-5",level:3},{value:"Where",id:"where-5",level:3},{value:"Example request",id:"example-request-5",level:3},{value:"Post body:",id:"post-body-2",level:3},{value:"JSON Schema",id:"json-schema",level:4},{value:"AVRO Schema",id:"avro-schema",level:4},{value:"Responses",id:"responses-5",level:3},{value:"Errors",id:"errors-5",level:3}],u={toc:m};function h(e){var n=e.components,a=(0,s.Z)(e,l);return(0,r.kt)("wrapper",(0,t.Z)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Schemas is a resource that works with topics by validating the published messages."),(0,r.kt)("h2",{id:"get-manage-schemas---retrieve-a-schema"},"[GET]"," Manage Schemas - Retrieve a Schema"),(0,r.kt)("p",null,"This request retrieves a specific schema under the given project"),(0,r.kt)("h3",{id:"request"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'GET "/v1/projects/{project_name}/schemas/{schema_name}"\n')),(0,r.kt)("h3",{id:"where"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project in which the schema will belong"),(0,r.kt)("li",{parentName:"ul"},"schema_name: Name of the schema to be created")),(0,r.kt)("h3",{id:"example-request"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'curl -X GET -H "Content-Type: application/json"\n " https://{URL}/v1/projects/project-1/schemas/schema-1?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"responses"},"Responses"),(0,r.kt)("p",null,"If successful, the response contains the requested schema."),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "uuid": "50811bd1-c94c-4ad7-8f55-a561c6270b50",\n    "name": "projects/project-1/schemas/schema-1",\n    "type": "json",\n    "schema": {\n        "properties": {\n            "address": {\n                "type": "string"\n            },\n            "email": {\n                "type": "string"\n            },\n            "name": {\n                "type": "string"\n            },\n            "telephone": {\n                "type": "string"\n            }\n        },\n        "required": [\n            "name",\n            "email"\n        ],\n        "type": "object"\n    }\n}\n')),(0,r.kt)("h3",{id:"errors"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"get-manage-schemas---retrieve-all-schemas"},"[GET]"," Manage Schemas - Retrieve All Schemas"),(0,r.kt)("p",null,"This request retrieves all schemas under the given project."),(0,r.kt)("h3",{id:"request-1"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'GET "/v1/projects/{project_name}/schemas"\n')),(0,r.kt)("h3",{id:"where-1"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project in which the schema will belong")),(0,r.kt)("h3",{id:"example-request-1"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'curl -X GET -H "Content-Type: application/json"\n " https://{URL}/v1/projects/project-1/schemas?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"responses-1"},"Responses"),(0,r.kt)("p",null,"If successful, the response contains all the schemas of the given project."),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "schemas": [\n  {\n    "uuid": "50811bd1-c94c-4ad7-8f55-a561c6270b50",\n    "name": "projects/project-1/schemas/schema-1",\n    "type": "json",\n    "schema": {\n        "properties": {\n            "address": {\n                "type": "string"\n            },\n            "email": {\n                "type": "string"\n            },\n            "name": {\n                "type": "string"\n            },\n            "telephone": {\n                "type": "string"\n            }\n        },\n        "required": [\n            "name",\n            "email"\n        ],\n        "type": "object"\n    }\n  },\n  {\n    "uuid": "50811bd1-c94c-4ad7-8f55-a561c6270b55",\n    "name": "projects/project-1/schemas/schema-2",\n    "type": "json",\n    "schema": {\n        "properties": {\n            "address": {\n                "type": "string"\n            },\n            "email": {\n                "type": "string"\n            },\n            "name": {\n                "type": "string"\n            },\n            "telephone": {\n                "type": "string"\n            }\n        },\n        "required": [\n            "name",\n            "email"\n        ],\n        "type": "object"\n    }\n  }\n ]\n}\n')),(0,r.kt)("h3",{id:"errors-1"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-manage-schemas---create-new-schema"},"[POST]"," Manage Schemas - Create new Schema"),(0,r.kt)("p",null,"This request creates a new schema"),(0,r.kt)("h3",{id:"supported-schema-types"},"Supported Schema Types"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"JSON,AVRO")),(0,r.kt)("h3",{id:"request-2"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'POST "/v1/projects/{project_name}/schemas/{schema_name}"\n')),(0,r.kt)("h3",{id:"where-2"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project in which the schema will belong"),(0,r.kt)("li",{parentName:"ul"},"schema_name: Name of the schema to be created")),(0,r.kt)("h3",{id:"example-request-2"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'curl -X POST -H "Content-Type: application/json -d POSTDATA"\n " https://{URL}/v1/projects/project-1/schemas/schema-1?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "json",\n  "schema":{\n        "type": "object",\n         "properties": {\n          "name":        { "type": "string" },\n          "email":        { "type": "string" },\n          "address":    { "type": "string" },\n          "telephone": { "type": "string" }\n         },\n        "required": ["name", "email"]\n  }\n}\n')),(0,r.kt)("h3",{id:"responses-2"},"Responses"),(0,r.kt)("p",null,"If successful, the response contains the newly created schema."),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "uuid": "50811bd1-c94c-4ad7-8f55-a561c6270b50",\n    "name": "projects/project-1/schemas/schema-1",\n    "type": "json",\n    "schema": {\n        "properties": {\n            "address": {\n                "type": "string"\n            },\n            "email": {\n                "type": "string"\n            },\n            "name": {\n                "type": "string"\n            },\n            "telephone": {\n                "type": "string"\n            }\n        },\n        "required": [\n            "name",\n            "email"\n        ],\n        "type": "object"\n    }\n}\n')),(0,r.kt)("h3",{id:"errors-2"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"put-manage-schemas---update-schema"},"[PUT]"," Manage Schemas - Update Schema"),(0,r.kt)("p",null,"This request updates the contents of a schema. You can update ",(0,r.kt)("inlineCode",{parentName:"p"},"one")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"all")," of the fields at a time."),(0,r.kt)("h3",{id:"request-3"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'PUT "/v1/projects/{project_name}/schemas/{schema_name}"\n')),(0,r.kt)("h3",{id:"where-3"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project under which the schema belongs"),(0,r.kt)("li",{parentName:"ul"},"schema_name: Name of the schema to be updated")),(0,r.kt)("h3",{id:"example-request-3"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'curl -X PUT -H "Content-Type: application/json -d POSTDATA"\n " https://{URL}/v1/projects/project-1/schemas/schema-1?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body-1"},"Post body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "json",\n  "name": "projects/project-1/schemas/new-name",\n  "schema":{\n        "type": "object",\n         "properties": {\n          "name":        { "type": "string" },\n          "email":        { "type": "string" },\n          "address":    { "type": "string" },\n          "telephone": { "type": "string" }\n         },\n        "required": ["name", "email", "address"]\n  }\n}\n')),(0,r.kt)("h3",{id:"responses-3"},"Responses"),(0,r.kt)("p",null,"If successful, the response contains the updated schema."),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "uuid": "50811bd1-c94c-4ad7-8f55-a561c6270b50",\n    "name": "projects/project-1/schemas/new-name",\n    "type": "json",\n    "schema": {\n        "properties": {\n            "address": {\n                "type": "string"\n            },\n            "email": {\n                "type": "string"\n            },\n            "name": {\n                "type": "string"\n            },\n            "telephone": {\n                "type": "string"\n            }\n        },\n        "required": [\n            "name",\n            "email",\n            "address"\n        ],\n        "type": "object"\n    }\n}\n')),(0,r.kt)("h3",{id:"errors-3"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"delete-manage-schemas---delete-schema"},"[DELETE]"," Manage Schemas - Delete Schema"),(0,r.kt)("p",null,"This request deletes a schema."),(0,r.kt)("h3",{id:"request-4"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'DELETE "/v1/projects/{project_name}/schemas/{schema_name}"\n')),(0,r.kt)("h3",{id:"where-4"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project under which the schema belongs"),(0,r.kt)("li",{parentName:"ul"},"schema_name: Name of the schema to be deleted")),(0,r.kt)("h3",{id:"example-request-4"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'curl -X DELETE -H "Content-Type: application/json"\n " https://{URL}/v1/projects/project-1/schemas/schema-1?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"responses-4"},"Responses"),(0,r.kt)("p",null,"If successful, the response is empty."),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},"")),(0,r.kt)("h3",{id:"errors-4"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_errors"},"Errors")," to see all possible Errors"),(0,r.kt)("h2",{id:"post-manage-schemas---validate-message"},"[POST]"," Manage Schemas - Validate Message"),(0,r.kt)("p",null,"This request is used whenever we want to test a message against a schema.\nThe process to check that your schema and messages are working as expected is to create\na new topic that needs to be associated with the schema, then create the message in bas64 encoding and\npublish it to the topic.Instead of creating all this pipeline in order to check your schema and messages\nwe can explicitly do it on this API call."),(0,r.kt)("h3",{id:"request-5"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'POST "/v1/projects/{project_name}/schemas/{schema_name}:validate"\n')),(0,r.kt)("h3",{id:"where-5"},"Where"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"project_name: Name of the project under which the schema belongs"),(0,r.kt)("li",{parentName:"ul"},"schema_name: Name of the schema to be updated")),(0,r.kt)("h3",{id:"example-request-5"},"Example request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'curl -X POST -H "Content-Type: application/json -d POSTDATA"\n " https://{URL}/v1/projects/project-1/schemas/schema-1:validate?key=S3CR3T"\n')),(0,r.kt)("h3",{id:"post-body-2"},"Post body:"),(0,r.kt)("h4",{id:"json-schema"},"JSON Schema"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "name1",\n  "email": "e1@example.com",\n  "address": "address1",\n  "telephone": "6980574421"\n}\n')),(0,r.kt)("h4",{id:"avro-schema"},"AVRO Schema"),(0,r.kt)("p",null,"When dealing with an AVRO Schema, the binary message needs to be encoded to ",(0,r.kt)("inlineCode",{parentName:"p"},"base64"),"\nalongside its ",(0,r.kt)("inlineCode",{parentName:"p"},"schema")," and sent via the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," field which is required."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": "DGFnZWxvc8T8Cg=="\n}\n')),(0,r.kt)("h3",{id:"responses-5"},"Responses"),(0,r.kt)("p",null,"Success Response\n",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "message": "Message validated successfully"\n}\n')),(0,r.kt)("h3",{id:"errors-5"},"Errors"),(0,r.kt)("p",null,"Please refer to section ",(0,r.kt)("a",{parentName:"p",href:"/argo-messaging/docs/api_errors"},"Errors")," to see all possible Errors"))}h.isMDXComponent=!0}}]);