<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">AMS - The Service | ARGO Messaging Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="AMS - The Service | ARGO Messaging Documentation"><meta data-react-helmet="true" name="description" content="The ARGO Messaging Service (AMS)  is a Publish/Subscribe Service, which implements the Google PubSub protocol. Instead of focusing on a single Messaging API specification for handling the logic of publishing/subscribing to the broker network the API focuses on creating nodes of Publishers and Subscribers as a Service. It provides an HTTP API that enables Users/Systems to implement message oriented service using the Publish/Subscribe Model over plain HTTP."><meta data-react-helmet="true" property="og:description" content="The ARGO Messaging Service (AMS)  is a Publish/Subscribe Service, which implements the Google PubSub protocol. Instead of focusing on a single Messaging API specification for handling the logic of publishing/subscribing to the broker network the API focuses on creating nodes of Publishers and Subscribers as a Service. It provides an HTTP API that enables Users/Systems to implement message oriented service using the Publish/Subscribe Model over plain HTTP."><meta data-react-helmet="true" property="og:url" content="https://argoeu.github.io/argo-messaging/docs/"><link data-react-helmet="true" rel="shortcut icon" href="/argo-messaging/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://argoeu.github.io/argo-messaging/docs/"><link rel="stylesheet" href="/argo-messaging/styles.1fe027f5.css">
<link rel="preload" href="/argo-messaging/styles.c2786714.js" as="script">
<link rel="preload" href="/argo-messaging/runtime~main.0cbf7aac.js" as="script">
<link rel="preload" href="/argo-messaging/main.7dac7fda.js" as="script">
<link rel="preload" href="/argo-messaging/1.0448e0ea.js" as="script">
<link rel="preload" href="/argo-messaging/2.aa35da3b.js" as="script">
<link rel="preload" href="/argo-messaging/33.d37901cf.js" as="script">
<link rel="preload" href="/argo-messaging/34.bf16a59a.js" as="script">
<link rel="preload" href="/argo-messaging/cf5ee5de.306271f8.js" as="script">
<link rel="preload" href="/argo-messaging/17896441.eb2259c4.js" as="script">
<link rel="preload" href="/argo-messaging/22386d8d.55460507.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/argo-messaging/"><img class="navbar__logo" src="/argo-messaging/img/ams-logo.svg" alt="argo-messaging logo"><strong class="navbar__title">ARGO Messaging Service</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/argo-messaging/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ARGOeu/argo-messaging" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/argo-messaging/"><img class="navbar__logo" src="/argo-messaging/img/ams-logo.svg" alt="argo-messaging logo"><strong class="navbar__title">ARGO Messaging Service</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/argo-messaging/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/ARGOeu/argo-messaging" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">What is AMS</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/argo-messaging/docs/">AMS - The Service</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">General Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/overview">Overview &amp; Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/msg_backend">Using Apache Kafka as a Backend Message system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/msg_flow">Data flow in Argo Messaging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/auth">Authentication &amp; Authorization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/projects_users">Initial Project &amp; User Management</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Argo Messaging API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_basic">Service introduction and configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_errors">API Errors</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Calls</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_auth">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_users">User Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_projects">Projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_topics">Topics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_subscriptions">Subscriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_metrics">API Operational Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_schemas">Schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_version">Get API Version information</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/api_registrations">User Registration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/publisher">Publisher Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/subscriber_guide">Subscriber Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/subscriber-pull_guide">Receiving messages using Pull</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/subscriber-push_guide">Receiving messages using Push</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How to use</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/how_to_use">How to use the service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/ams_push_worker">AMS Push Worker</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Frequent Questions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/qa">Q &amp; A - General Questions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/argo-messaging/docs/qa_ruby">Q &amp; A - Ruby specifics</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">AMS - The Service</h1></header><div class="markdown"><p>The ARGO Messaging Service (AMS)  is a Publish/Subscribe Service, which implements the Google PubSub protocol. Instead of focusing on a single Messaging API specification for handling the logic of publishing/subscribing to the broker network the API focuses on creating nodes of Publishers and Subscribers as a Service. It provides an HTTP API that enables Users/Systems to implement message oriented service using the Publish/Subscribe Model over plain HTTP.</p><p>The ARGO Messaging Service is a real-time messaging service that allows the user to send and receive messages between independent applications. It is implemented as a Publish/Subscribe Service. Instead of focusing on a single Messaging service specification for handling the logic of publishing/subscribing to the broker network the service focuses on creating nodes of Publishers and Subscribers as a Service. In the Publish/Subscribe paradigm, Publishers are users/systems that can send messages to named-channels called Topics. Subscribers are users/systems that create Subscriptions to specific topics and receive messages. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="features"></a>Features<a aria-hidden="true" tabindex="-1" class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul><li><strong>Ease of use</strong>: It supports an HTTP API and a python library so as to easily integrate with the AMS. </li><li><strong>Push Delivery</strong>: ŒëŒúS instantly pushes asynchronous event notifications when messages are published to the message topic. Subscribers are notified when a message is available.</li><li><strong>Replay messages</strong>: replay messages that have been acknowledged by seeking to a timestamp. </li><li><strong>Schema Support</strong>: on demand mechanism that enables a)  the definition of the expected payload schema, b)  the definition of the expected set of attributes and values and c) the validation for each message if the requirements are met and immediately notify client</li><li><strong>Replicate messages on multiple topics</strong>: Republisher script that consumes and publishes messages for specific topics (ex. SITES) </li></ul><p>The AMS supports <strong>‚ÄúSchema Validation per topic‚Äù</strong>. It allows the user to define a schema for each topic and validate messages as they are published. It can protect topics from garbage, incomplete messages especially when a topic has multiple remote publishers to ensure data integrity on the client side. </p><p>The ‚ÄúReplay messages‚Äù feature is an offset manipulation mechanism that allows the client on demand to replay or skip messages. When creating a subscription (or editing an existing one), there is an internal option to retain acknowledged messages (by default up to 7 days, or more on request).  To replay and reprocess these messages (ex. testing, error in manipulation etc) , the client has the ability to go back and use the same messages just by seeking a previous timestamp. If  the user needs to skip messages,  he just has to  seek an offset in the future. </p><p>The implementation for the ‚Äúpush server‚Äù is one of the features used.  The push server(s) are an optional set of worker-machines - deployed on demand - that are needed when the AMS wants to support push enabled subscriptions. The latest implementation provides a gRPC interface in order to communicate with AMS api.  A new security approach was also introduced to enable a secure handshake. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="architectural-aspect"></a>Architectural aspect<a aria-hidden="true" tabindex="-1" class="hash-link" href="#architectural-aspect" title="Direct link to heading">#</a></h2><ul><li><strong>Durability</strong>: provide very high durability, and at-least-once delivery, by storing copies of the same message on multiple servers.</li><li><strong>Scalability</strong>: It can handle increases in load without noticeable degradation of latency or availability</li><li><strong>Latency</strong>: A high performance service that can serve more than 1 billion messages per year </li><li><strong>Availability</strong>:  it deals with different types of issues, gracefully failing over in a way that is unnoticeable to end users. Failures can occur in hardware, in software, and due to load.  </li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="fundamentals"></a>Fundamentals<a aria-hidden="true" tabindex="-1" class="hash-link" href="#fundamentals" title="Direct link to heading">#</a></h2><p>In the Publish/Subscribe paradigm, Publishers are users/systems that can send messages to named-channels called Topics. Subscribers are users/systems that create Subscriptions to specific topics and receive messages.</p><ul><li><strong>Topics</strong>: Topics are resources that can hold messages. Publishers (users/systems) can create topics on demand and name them (Usually with names that make sense and express the class of messages delivered in the topic)</li><li><strong>Subscriptions</strong>: In order for a user to be able to consume messages, he must first create a subscription. Subscriptions are resources that can be created by users on demand and are attached to specific topics. Each topic can have multiple subscriptions but each subscription can be attached to just one topic. Subscriptions allows Subscribers to incrementally consume messages, at their own pace, while the progress is automatically tracked for each subscription.</li><li><strong>Message</strong>: The combination of data and (optional) attributes that a publisher sends to a topic and is eventually delivered to subscribers.</li><li><strong>Message attribute</strong>: A key-value pair that a publisher can define for a message. </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pull-vs-push-subscriptions"></a>Pull vs Push Subscriptions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pull-vs-push-subscriptions" title="Direct link to heading">#</a></h3><p>AMS supports both push and pull message delivery. In push delivery, the Messaging Service initiates requests to your subscriber application to deliver messages. In pull delivery, your subscription application initiates requests to the Pub/Sub server to retrieve messages.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pull-subscriptions"></a>Pull subscriptions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pull-subscriptions" title="Direct link to heading">#</a></h4><p>Pull subscriptions can be configured to require that message deliveries are acknowledged by the Subscribers. If an acknowledgement is made, subscription can resume progressing and send the next available messages. If no acknowledgement is made subscription pauses progressing and re-sends the same messages.
In a pull subscription, the subscribing application explicitly calls the API pull method, which requests delivery of a message in the subscription queue. The Pub/Sub server responds with the message (or an error if the queue is empty), and an ack ID. The subscriber then explicitly calls the acknowledge method, using the returned ack ID, to acknowledge receipt.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="push-subscriptions"></a>Push subscriptions**<a aria-hidden="true" tabindex="-1" class="hash-link" href="#push-subscriptions" title="Direct link to heading">#</a></h4><p>In a push subscription, the push server sends a request to the subscriber application, at a preconfigured endpoint. The subscriber&#x27;s HTTP response serves as an implicit acknowledgement: a success response indicates that the message has been successfully processed and the Pub/Sub system can delete it from the subscription; a non-success response indicates that the Pub/Sub server should resend it (implicit &quot;nack&quot;). To ensure that subscribers can handle the message flow, the Pub/Sub dynamically adjusts the flow of requests and uses an algorithm to rate-limit retries.
The push server(s) are an optional set of worker-machines that are needed when the AMS wants to support push enabled subscriptions.
It allows to decouple the push functionality from AMS api nodes
They perform the push functionality for the messages of a push enabled subscription (consume-&gt;deliver‚Üíack)/
Provide a gRPC interface in order to communicate with their api
Provide subscription runtime status</p><p><strong>Apart from all these the Messaging Service supports:</strong></p><ul><li><strong>Argo-ams-library</strong>: A simple library to interact with the ARGO Messaging Service.</li><li><strong>Argo-AuthN</strong>: Argo-authn is a new Authentication Service. This service provides the ability to different services to use alternative authentication mechanisms without having to store additional user info or implement new functionalities.The AUTH service holds various information about a service‚Äôs users, hosts, API urls, etc, and leverages them to provide its functionality.</li><li><strong>AMS Metrics</strong>: Metrics about the service and the usage.</li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/argo-messaging/docs/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview &amp; Introduction ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#architectural-aspect" class="table-of-contents__link">Architectural aspect</a></li><li><a href="#fundamentals" class="table-of-contents__link">Fundamentals</a><ul><li><a href="#pull-vs-push-subscriptions" class="table-of-contents__link">Pull vs Push Subscriptions</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/argo-messaging/docs/">Explore Documentation</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ARGOeu/argo-messaging" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ARGOeu/argo-messaging" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="http://www.grnet.gr/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="GRNET" src="/argo-messaging/img/grnet-logo.png"></a></div><div>Copyright ¬© 2022 <a href="http://www.grnet.gr/"> GRNET </a></div></div></div></footer></div>
<script src="/argo-messaging/styles.c2786714.js"></script>
<script src="/argo-messaging/runtime~main.0cbf7aac.js"></script>
<script src="/argo-messaging/main.7dac7fda.js"></script>
<script src="/argo-messaging/1.0448e0ea.js"></script>
<script src="/argo-messaging/2.aa35da3b.js"></script>
<script src="/argo-messaging/33.d37901cf.js"></script>
<script src="/argo-messaging/34.bf16a59a.js"></script>
<script src="/argo-messaging/cf5ee5de.306271f8.js"></script>
<script src="/argo-messaging/17896441.eb2259c4.js"></script>
<script src="/argo-messaging/22386d8d.55460507.js"></script>
</body>
</html>