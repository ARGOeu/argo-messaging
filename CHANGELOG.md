# Changelog

All notable changes in the argo messaging service have been listed below alognside their release date and the package version they belong.

## 1.7.0-1 - (2025-20-05)

### Changed

-   AM-372 Allow kafka messages up to 1.5 mb
    
-   AM-357 Ams Compatibility with mongo 6
    
-   AM-353 Increase timeout duration for pulling messages from kafka
    
-   AM-350 ams: Upgrade to Golang version 1.21.6

## 1.6.0-1 - (2023-07-12)

### Added

-   AM-38 Introduce MongoDB integration tests in AMS
    
-   AM-326 ams:Introduce trace id identifier in logs

### Changed

-   Bumping gorilla handlers and context to latest versions
    
-   AM-338 ams: Use the official mongodb client

## 1.5.0-1 - (2023-18-05)

### Changed

-   AM-311 Upgrade to go1.19

### Fixed

-   Update docusaurus dependencies
    
-   AM-306 Static analysis assessment fixes
    
-   Update Postman CI/CD collection to use x-api-key header

## 1.4.0-1 - (2022-10-10)

### Added

-   AM-284 API Call: Per project_admin usage report    
 
### Fixed

-   AM-287 cascade delete of metrics for absent resources

## 1.3.0-1 - (2022-29-07)

### Changed

-   AM-254: ams: Enable create_sub to handle mattermost webhooks
    
-   AM-258 ams: Enable sub_mod_push to handle mattermost webhooks
    
-   AM-255 ams: Update push functionality to handle mattermost webhooks
    
-   AM-260 ams: Extra subscription field that indicates base64 encode/decode of payload

## 1.2.0-1 - (2022-19-05)

### Added

-   AM-187 Topic: attach schema to a topic
    
-   AM-188 Topic: dettach schema to a topic

### Changed
  

-   AM-172 Display hostname and distro information on ams api version call
    
-   AM-186 Registration: Add comment field in the :decline action
        
-   AM-103: Upgrade TLS version to 1.2
    
-   AM-154 Allow x-api-key header in CORS settings
    
-   AM-141 Extend the version api call to include the service's version
   
### Fixed

-   AM-162 Fix issue with some fields displaying timestamps in local time instead of utc

## 1.0-1 - (2021-11-08)

### Added

-  AM-128 Process for handling rebalancing of topics partitions' replicas  
-  AM-122 Process for removing unused kafka topics

### Changed

 -   AM-141 Extend the version api call to include the service's version
 ### Fixed
 
-   AM-138 Fixes over various log messages
    
-   AM-11 AMS /user/profile call doesn't work correctly with x-api-key header mode
    
-   AM-131Va metrics needed not completely aligned with VA metrics in call

## 0.8-1 - (2021-03-31)

### Added
-   ARGO-2767 Implement authorization header
-   ARGO-2707 Create a new metrics API Call
 
### Changed

-   DEVOPS-395 Add checksec through jenkinsfile
    
-   ARGO-2927 - Users:listall & project:members option for detailed view
        
-   ARGO-2704 AMS Security - Document
    
-   ARGO-2749 Ams token-creation change hash of random generated byte array to sha256
        
-   ARGO-2706 Add extra subscription field created_on
    
-   ARGO-2705 Add extra topic field created_on
    
-   ARGO-2701 ModifyPushCFG api call should also update the authorization header
    
-   ARGO-2686 ams: support header authentication on remote for push messages
    
-   ARGO-2649 Extend the health API Call to include push server connectivity errors
   
## Fixed

-   ARGO-2918 Escalation of Privileges via Docker daemon socket mounted in container
    
-   ARGO-2930 Sub and Topic ACL should be initialized as empty array
    
-   ARGO-2920 Remove Authentication token from request URL
    
-   ARGO-2964 Full hardened go binary
    
-   DEVOPS-346: Remove downstream swagger job triggering
    
-   ARGO-2901 Remove API version and commit from api call
    
-   ARGO-2899 Vulnerable GO version
    
-   ARGO-2898 Administrative authentication tokens leaked in application logs
    
-   ARGO-2762 Projects:members user count bug
    
-   ARGO-2453 Update README in messaging
    
-   ARGO-2688 Argo-messaging break handler tests code file into several files
    
-   ARGO-2687 move handlers file to package and break it in several files
    
-   ARGO-2673 Wrong offset report in stale subscriptions
    
-   ARGO-2659 FIx day counting in Daily Message Average API Call

## 0.7-1 - (2020-08-05)

### Added
-   ARGO-2381 New API Call - List all registrations
    
-   ARGO-2380 New API Call - List one registration
    
-   ARGO-2375 New API Call - Decline a user's registration
    
-   ARGO-2374 New API Call - Accept a user's registration
    
-   ARGO-2373 New API Call - User register

-   ARGO-2326 New API Call - Project member(user) create

-   DEVOPS-65 Add Jenkinsfile

### Changed

-   DEVOPS-210 Add trigger of argodoc
    
-   ARGO-2497 AMS Tests for its automatic deployment
    
-   ARGO-2390 Migrate argo-messaging to use modules
    
-   Migrate argo-messaging to golang 1.14
    
-   ARGO-2383 Update the UserUpdate API Call to include the newly added fields
    
-   ARGO-2382 Update the UserCreate API Call to include the newly added fields
      
- ARGO-2363 Extend ams user model with new fields
    
-   ARGO-2364 Allow project admin to add users to its project
    
-   ARGO-2330 Allow project admin to remove users from its project
    
-   ARGO-2329 Allow project admin to change roles for its project's users
        
-   ARGO-2307 AMS schemas: add support for avro validation
        
### Fixed

-   Update README.md
    
-   ARGO-2342 Check validity of service roles when creating an ams user
    
-   ARGO-2325 Bug creating/updating user with empty project name

  

## 0.6-1 - (2020-01-08)

### Added

-   ARGO-1947 AMS subscriptions should be allowed to have slow start as their retry policy
    
-   ARGO-2045 New API Call - Create schema
    
-   ARGO-2046 New API Call - Retrieve schema
    
-   ARGO-2047 New API Call - Update schema
        
-   ARGO-2060 Schema should follow the topic/subscription reference/name
    
-   ARGO-2048 New API Call - Delete schema
    
 -   MKdocs page initialization
    
-   ARGO-2068 New API Call - Retrieve all schemas under a project
    
-   ARGO-2090 Add version info in argo-messaging binary
    
-   ARGO-2086 Idea for argo-messaging: add validate action to schema resource
    

### Changed
-   ARGO-2050 Topic:create should allow to link schema
-   Update doc index
-   ARGO-2146 Migrate AMS scripts to python3


### Fixed

-   ARGO-1984 Prohibit duplicate project references in user profiles

## 0.5-1 - (2019-09-05)

### Added

-   ARGO-1880 List user members of a project

-   ARGO-1870 Add AMS metric: consumption rate on subscription

-   ARGO-1834 Add AMS metric: publishing rate on topic
    
-   ARGO-1828 API Call - Get offset from timestamp

### Changed


-   ARGO-492 Add configuration parameter in the push configuration for max_messages per push action
    
-   ARGO-1921 New API Call - Average daily messages
    
-   ARGO-1892 Remove update subscription status functionality from the ams push server
    
  -   ARGO-1670 Perform the RPC Subscription Status on api call Get subscription
       
-   ARGO-629 When a topic is deleted in the api, ensure topic is also deleted in broker
    
-   ARGO-1820 Update the messaging service to use the latest sarama version compatible with kafka 2
    

#### Fixed

-   ARGO-1854 Change the way we utilise the sarama.ClusterAdmin in order to avoid EOF/broken tcp pipe errors

## 0.4-1 - (2019-07-03)

### Added 
-   ARGO-1792 API Call - Verify Push Endpoint
-   ARGO-1649 API Call that returns a user's profile based on the provided auth token
- -   ARGO-1669 Allow only push worker user to pull from push enabled subscription
    
-   ARGO-1632 Add ACL-based access in subscriptions:list
    
-   ARGO-1631 Add ACL-based access to topics:list
    
-   ARGO-1657 Add/remove push worker from sub's acl and link him with sub's project
    
-   ARGO-1661 Ams handling of push worker initialisation
    
-   ARGO-1656 Internal function - append project to user's projects
    
-   ARGO-1639 API Call - List topic's subscriptions
    
-   ARGO-1651 Internal function - remove user(s) from topic/sub ACL
    
-   ARGO-1650 Internal function - append user(s) to topic/sub ACL
    
-   ARGO-1630 Push worker role
    
-   ARGO-1604 Add health check call for grpc backends
    
-   ARGO-1600 Add push server interaction on modify push config api call
    
-   ARGO-1606 Update push status field api call
    
-   ARGO-1602 Ams push server single connection
    
-   ARGO-1553 Grpc client to interface with the push server
    
-   ARGO-1471 Create a streaming producer
    
-   ARGO-1469 Create a bulk producer
    
-   ARGO-486 Add pagination support for project subscriptions
    
-   ARGO-487 Add pagination support for project topics
-  ARGO-1432 Add pagination support for users
    
-   ARGO-1431 Add daily msg count for projects:metrics
    
-   ARGO-1427 Add daily msg count for topics:metrics
    
-   ARGO-1401 Number of messages send via the Argo Messaging Service (per day)
    
-  ARGO-421 Modify sub's ack deadline
    
-   ARGO-1375 Script to export AMS kafka data

### Changed
-   ARGO-1801 Update response Verify push endpoint call
    
-   ARGO-1692 Upgrade authorisation per resource handling

-   Consumer script
   
-   ARGO-1782 Adjust push worker workflow depending on the verification of the push endpoint of each subscription
        
-   ARGO-1787 Add verification_hash and verified fields for push enabled subscriptions
    
-   ARGO-1683 Block push worker user from pulling when push enabled is false
    
-   ARGO-1723 Republishing of specific messages
        
-   ARGO-1721 [GRPC status check] - Update ams push server client to use the new status rpc call
    
-   ARGO-1684 update status call to handle push enabled false
   
-   ARGO-1436 Mongo _id field exposure for pagination affects user creation
       
-   ARGO-1827 Update connectivity logging format
    
-   ARGO-1925 API support predefined policies in push mode subscription
    
-   AO-492 Make syslog logging configurable for AMS
    
-   ARGO-1825 Update the request logging format
    
-   ARGO-1840 Update the error response for topic:publish and subscription:pull whenever a kafka error is encountered
    
-   ARGO-1454 Migrate argo-messaging to golang/dep tool
    
-   ARGO-1376 Extend ams-migrate script to support import
    
-   ARGO-1554 Add a status field at the subscription struct that will contain information regarding its activation on the ams push server
    
-   ARGO-1550 Disable push functionality in ams
    
-   ARGO-1252 Update config to handle push server information
    

  

### Fixed

-   ARGO-1803 Update service file to include service restart on failure
    
-   ARGO-1627 Check if the respective topic exists when pulling messages
    
-   ARGO-1592 ACL for topic/sub should not contain empty names
    
-    ARGO-1446 Improve the receiver endpoint to be more robust
    
-    ARGO-1399 Topic:metrics && Subscription:metrics check if topic/sub exIsts
    
-    ARGO-1410 Fix nil context bug
    
-    ARGO-1373 argo-messaging add failsafe check to not allow admin empty tokens
